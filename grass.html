<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Травяные</title>
<link rel="icon" href="/images/favicon.svg" type="image/svg+xml" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
  href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700;900&family=Sen:wght@400;700&display=swap"
  rel="stylesheet"
/>
<link rel="stylesheet" href="css/main.css" />
<link rel="stylesheet" href="css/header.css" />
<link rel="stylesheet" href="css/footer.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"
    />
    <link rel="stylesheet" href="./css/products.css" />
    <link rel="stylesheet" href="./css/breadcrumb.css" />
    <meta name="description" content=""/>
  </head>
  <body style="background-color: #ebc1a4;">
    <div class="wrapper" >
      <div class="header header__container">
  <a>
    <div class="header__logo logo">
      <img class="logo__img" src="./free-icon-seed-2227504.png" alt="Логотип компании"/>
      <div class="logo__title"><p style="color: #001018;
        font-family: Montserrat;
        font-size: 24px;
        font-style: normal;
        font-weight: 900;
        line-height: normal;
        position: relative;">CЕМЕННАЯ РАДУГА<p></div>
    </div>
  </a>
  <a href="/korzina-tovarov">
  <div class="header__backet backet">
    <img class="backet__img" src="" /> 
    <div class="backet__title"></div>
  </div>
</a>
</div>
      <section>
        <div class="list">
          <div class="list__nav list__nav__container">
            <div class="list__title">
              <ul class="breadcrumb">
                <li><a href="index.html">Главная страница</a></li>
                <li><a href="grass.html">травяные семена</a></li>
              </ul>
            </div>
          </div>
          <div class="list__table table">
            
            
              <div class="wrapper__card">
                <div class="card" id="1">
                  <div class="card__swiper swiper">
                    <div class="swiper-wrapper">
                      
                        <div class="swiper-slide">
                          <img src="./эпендос.svg" />
                        </div>
                        
                         
                    </div>
                    <div class="swiper-pagination"></div>
                  </div>
                  
                    <div class="card__info">
                      <p class="card__title">Семена эспендоса</p>
                      <p class="card__length">В наличии</p>
                      <p class="card__price">150 ₽</p>
                    </div>
                  
                  <div class="card__backet mini-backet">
                    <div id="backet" class="mini-backet__card">
                      <p>В корзину</p>
                    </div>
                  </div>
                </div>
              </div>
           
              <div class="wrapper__card">
                <div class="card" id="2">
                  <div class="card__swiper swiper">
                    <div class="swiper-wrapper">
                      
                        <div class="swiper-slide">
                          <img src="./лен.svg" />
                        </div>
                         
                    </div>
                    <div class="swiper-pagination"></div>
                  </div>
                  
                    <div class="card__info">
                      <p class="card__title">Семена льна</p>
                      <p class="card__length">В наличии</p>
                      <p class="card__price">90 ₽</p>
                    </div>
                  
                  <div class="card__backet mini-backet">
                    <div id="backet" class="mini-backet__card">
                      <p>В корзину</p>
                    </div>
                  </div>
                </div>
              </div>
           
              <div class="wrapper__card">
                <div class="card" id="3">
                  <div class="card__swiper swiper">
                    <div class="swiper-wrapper">
                      
                        <div class="swiper-slide">
                          <img src="./подсолнечникгиг.svg" />
                        </div>
                         
                    </div>
                    <div class="swiper-pagination"></div>
                  </div>
                  
                    <div class="card__info">
                      <p class="card__title">Семена подсолнечника "Гигантский"</p>
                      <p class="card__length">В наличии</p>
                      <p class="card__price">120 ₽</p>
                    </div>
                  
                  <div class="card__backet mini-backet">
                    <div id="backet" class="mini-backet__card">
                      <p>В корзину</p>
                    </div>
                  </div>
                </div>
              </div>
           
              <div class="wrapper__card">
                <div class="card" id="4">
                  <div class="card__swiper swiper">
                    <div class="swiper-wrapper">
                      
                        <div class="swiper-slide">
                          <img src="./рожь.svg" />
                        </div>
                         
                    </div>
                    <div class="swiper-pagination"></div>
                  </div>
                  
                    <div class="card__info">
                      <p class="card__title">Семена ржи</p>
                      <p class="card__length">В наличии</p>
                      <p class="card__price">70 ₽</p>
                    </div>
                  
                  <div class="card__backet mini-backet">
                    <div id="backet" class="mini-backet__card">
                      <p>В корзину</p>
                    </div>
                  </div>
                </div>
              </div>
           
              <div class="wrapper__card">
                <div class="card" id="5">
                  <div class="card__swiper swiper">
                    <div class="swiper-wrapper">
                      
                        <div class="swiper-slide">
                          <img src="./белый-горох.svg" />
                        </div>
                         
                    </div>
                    <div class="swiper-pagination"></div>
                  </div>
                  
                    <div class="card__info">
                      <p class="card__title">Семена белого гороха</p>
                      <p class="card__length">В наличии</p>
                      <p class="card__price">60 ₽</p>
                    </div>
                  
                  <div class="card__backet mini-backet">
                    <div id="backet" class="mini-backet__card">
                      <p>В корзину</p>
                    </div>
                  </div>
                </div>
              </div>
           
              <div class="wrapper__card">
                <div class="card" id="6">
                  <div class="card__swiper swiper">
                    <div class="swiper-wrapper">
                      
                        <div class="swiper-slide">
                          <img src="./просо.svg" />
                        </div>
                         
                    </div>
                    <div class="swiper-pagination"></div>
                  </div>
                  
                    <div class="card__info">
                      <p class="card__title">Семена просо</p>
                      <p class="card__length">В наличии</p>
                      <p class="card__price">50 ₽</p>
                    </div>
                  
                  <div class="card__backet mini-backet">
                    <div id="backet" class="mini-backet__card">
                      <p>В корзину</p>
                    </div>
                  </div>
                </div>
              </div>
          </div>
        </div>
      </section>
    </div>
</div>
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
    <script src="/js/basket.js"></script>
    <script>
      let swiper = new Swiper(".card__swiper", {
        pagination: {
          el: ".swiper-pagination",
        },
      });
    </script>
    <script>
      let backet = document.querySelectorAll("#backet");
      function render() {
        let cards = document.querySelectorAll(".card");
        cards.forEach((el) => {
          let textBut = el.querySelector("#backet p");
          let obj = get(Number(el.id));
          if (obj) textBut.innerHTML = `В корзине ${obj.quantity}`;
          else {
            textBut.innerHTML = `В корзину`;
          }
        });
      }
      render();
      backet.forEach((el) => {
        el.addEventListener("click", () => {
          console.log(el.parentElement.parentElement);
          const idParent = Number(el.parentElement.parentElement.id);
          const priceParent = Number(
            el.parentElement.parentElement
              .querySelector(".card__price")
              .textContent.split(" ")[0]
          );
          console.log(priceParent);
          const parent = el.parentNode;
          const div = document.createElement("div");
          div.className = "mini-backet__card mini-backet__card--count";
          div.id = "backet-count";
          div.style.backgroundColor = "#2D3B3F";
          let counter = get(idParent)?.quantity || 0; // Изначальное значение счетчика
          div.innerHTML = `
              <p id="minus_${idParent}">-</p>
              <p id="count_${idParent}">${counter}</p>
              <p id="plus_${idParent}">+</p>`;
          el.style.display = "none";
          parent.appendChild(div);
          let counterElementPlus = document.getElementById(`plus_${idParent}`); // Получаем ссылку на элемент счетчика+
          let counterElementMinus = document.getElementById(
            `minus_${idParent}`
          );
          let intervalId = null; // ID интервала, который будет увеличивать счетчик при зажатии
          counterElementPlus.addEventListener("click", () => {
            counter++;
            add({ id: idParent, price: priceParent });
            renderBasket(total());
            document.getElementById(`count_${idParent}`).innerHTML = counter;
          });
          counterElementMinus.addEventListener("click", () => {
            if (counter <= 0) return;
            counter--;
            quantity(idParent, -1);
            renderBasket(total());
            document.getElementById(`count_${idParent}`).innerHTML = counter;
            if (counter <= 0) {
              clearInterval(intervalId);
              el.style.display = "";
              parent.removeChild(counterElementMinus.parentNode);
              render();
            }
          });
          counterElementPlus.addEventListener("mousedown", function () {
            intervalId = setInterval(function () {
              counter++;
              add({ id: idParent, price: priceParent });
              renderBasket(total());
              document.getElementById(`count_${idParent}`).innerHTML = counter;
            }, 100); // Увеличиваем счетчик каждые 100 миллисекунд
          });
          counterElementMinus.addEventListener("mousedown", function () {
            if (counter <= 0) return;
            intervalId = setInterval(function () {
              counter--;
              quantity(idParent, -1);
              renderBasket(total());
              document.getElementById(`count_${idParent}`).innerHTML = counter;
              if (counter <= 0) {
                clearInterval(intervalId);
                el.style.display = "";
                parent.removeChild(counterElementMinus.parentNode);
                render();
              }
            }, 100); // Увеличиваем счетчик каждые 100 миллисекунд
          });
          document.addEventListener("mouseup", function () {
            clearInterval(intervalId); // Останавливаем увеличение счетчика при отпускании мыши
          });
        });
      });
    </script>
  </body>
</html>